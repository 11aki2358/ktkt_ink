<!DOCTYPE html>
<html lang="ja">

<head>
  <meta name="robots" content="noindex,nofollow">
  <meta name="googlebot" content="noindex,nofollow">
  <meta name="pinterest" content="nopin">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#000000">
  <link rel="shortcut icon" href="../images/favicon.svg" type="image/svg+xml">
  <title>backyard</title>
  <link rel="stylesheet" href="../css/decoration.css" type="text/css" id="style">
  <link rel="stylesheet" href="../css/footer.css" type="text/css" id="style">
  <link rel="stylesheet" href="../css/image.css" type="text/css" id="style">
  <link rel="stylesheet" href="../css/style.css" type="text/css" id="style">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
</head>

<body>
  <!-- ヘッダー -->
  <header>
    <nav>
      <div class="header-logo-menu">
        <div class="logo-area">
          <h1><a href="./backyard.html">backyard</a></h1>
        </div>
        <div id="nav-drawer">
          <input id="nav-input" type="checkbox" class="nav-unshown">
          <label id="nav-open" for="nav-input"><span></span></label>
          <label class="nav-unshown" id="nav-close" for="nav-input"></label>
        </div>
      </div>
    </nav>
  </header>

  <main>
  <p>
    <input type="text" name="data" id="data" placeholder="" value="ここに平文">
    <label for="">データ / Data</label>
  </p>
  <p>
    <input type="text" name="pass_phrase" id="pass_phrase" value="ここにパスワード">
    <label for="">パスフレーズ / Path Phrase</label>
  </p>
  <p>
    <input type="submit" id="execute" value="実行">
  </p>
  <div id="output"></div>

  <p>
    <a href="https://chakkari.org/blog/2020/05/03/aes-encrypt-with-javascript/" target="_blank">こちら</a>のリンクからコピペした
  </p>
  </main>

  <script>
    window.onload = () => {
      let buttonExecute = document.getElementById('execute')
      buttonExecute.addEventListener('click', () => {
        execute()
      });
    }

    function execute() {
      // パスフレーズ（暗号鍵）
      let passPhrase = document.getElementById('pass_phrase').value;
      // 暗号化したい元のデータ
      let data = document.getElementById('data').value;
      let utf8_plain = CryptoJS.enc.Utf8.parse(data);
      // 暗号化
      let encrypted = CryptoJS.AES.encrypt(utf8_plain, passPhrase);
      // 復号化
      let decrypted = CryptoJS.AES.decrypt(encrypted, passPhrase);
      let txt_dexrypted = decrypted.toString(CryptoJS.enc.Utf8);
      // 表示
      document.getElementById("output").innerHTML =
        "key : " + passPhrase + "<br />" +
        "data : " + data + "<br />" +
        "encrypted : " + encrypted + "<br />" +
        "decrypted : " + txt_dexrypted;
    }
  </script>
</body>

</html>